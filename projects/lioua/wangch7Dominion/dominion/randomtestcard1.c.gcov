        -:    0:Source:randomtestcard1.c
        -:    0:Graph:randomtestcard1.gcno
        -:    0:Data:randomtestcard1.gcda
        -:    0:Runs:2
        -:    0:Programs:1
        -:    1:/* Card Test Random: Smithy Card
        -:    2: *  Card test/random test for the Smithy Card
        -:    3: *  Card Effect: Draw 3 Cards
        -:    4: * 
        -:    5:* randomtestcard1: randomtestcard1.c dominion.o rngs.o
        -:    6:	gcc -o randomtestcard1 -g randomtestcard1.c dominion.o rngs.o $(CFLAGS)
        -:    7: */
        -:    8: 
        -:    9:#include "dominion.h"
        -:   10:#include "dominion_helpers.h"
        -:   11:#include <string.h>
        -:   12:#include <stdio.h>
        -:   13:#include <assert.h>
        -:   14:#include "rngs.h"
        -:   15:#include <stdlib.h>
        -:   16:#include <math.h>
        -:   17:#include <time.h>
        -:   18:
        -:   19:#define TESTCARD "smithy"
        -:   20:
function main called 2 returned 100% blocks executed 78%
        -:   21:int main() {
        2:   22:  int pass = 1;
        -:   23:  struct gameState G, testState;
        -:   24:  // int k[10] = {
        -:   25:  //     adventurer, council_room, feast, gardens, mine, remodel, smithy, village, baron, great_hall
        -:   26:  // };
        2:   27:  int x = 1000;
        -:   28:  int i, n, playedCard;
        2:   29:  int handPos = 0, choice1 = 0, choice2 = 0, choice3 = 0, bonus = 0;
        -:   30:  int thisPlayer;
        2:   31:  int addedCards = 3;
        2:   32:  int discard = 1;
        -:   33:  int totalCards, expectedCards;
        -:   34:
        2:   35:	srand(time(NULL));
        2:   36:	printf("Random Testing for Card: Smithy\n");
     4004:   37:	for (i = 0; i < x; i++){
branch  0 taken 99%
branch  1 taken 1%
     2000:   38:      printf("\nTest Case: %d\n", i);
 26304000:   39:      for (n = 0; n < sizeof(struct gameState)/ sizeof(int); n++) {
branch  0 taken 99%
branch  1 taken 1%
 13150000:   40:        ((int*)&G)[n] = rand() % 128;
 13150000:   41:      }
        -:   42:
     2000:   43:      G.numPlayers = (rand() % 3)+2;
     2000:   44:      G.whoseTurn = rand() % G.numPlayers;
     2000:   45:      thisPlayer = whoseTurn(&G);
     2000:   46:      G.handCount[thisPlayer] = (rand() % (MAX_HAND/2))+1;
     2000:   47:      G.deckCount[thisPlayer] = (rand() % (MAX_DECK/2))+1;
     2000:   48:      G.discardCount[thisPlayer] = (rand() % (MAX_DECK/2))+1;
     2000:   49:      handPos = (rand() % G.handCount[thisPlayer]);
        -:   50:
     2000:   51:      memcpy(&testState, &G, sizeof(struct gameState));
        -:   52:
     2000:   53:      playedCard = cardEffect(smithy, choice1, choice2, choice3, &testState, handPos, &bonus);
     2000:   54:      if (playedCard != 0) {
branch  0 taken 0%
branch  1 taken 100%
    #####:   55:        printf("Playing Card Failed");
    #####:   56:        pass = 0;
    #####:   57:      };
        -:   58:
     2000:   59:      if (testState.handCount[thisPlayer] != G.handCount[thisPlayer]+addedCards-discard){
branch  0 taken 0%
branch  1 taken 100%
    #####:   60:        pass = 0;
    #####:   61:        printf("Hand Count: %d, Expected: %d \n", testState.handCount[thisPlayer], G.handCount[thisPlayer]+addedCards-discard);
    #####:   62:      }
        -:   63:
     2000:   64:      totalCards = G.deckCount[thisPlayer] + G.discardCount[thisPlayer];
     2000:   65:      expectedCards = testState.deckCount[thisPlayer] + testState.discardCount[thisPlayer];
     2000:   66:      if (expectedCards != totalCards - addedCards) {
branch  0 taken 0%
branch  1 taken 100%
    #####:   67:        pass = 0;
    #####:   68:        printf("Total Cards: %d, Expected: %d \n", expectedCards, totalCards-addedCards);
    #####:   69:      };
     2000:   70:    }
        -:   71:    //End For Loop and Return Results
        2:   72:    if (pass) {
branch  0 taken 100%
branch  1 taken 0%
        2:   73:        printf(">>>>>TEST SUCCESSFULLY COMPLETED <<<<<\n");
        2:   74:    } else{
    #####:   75:        printf(">>>>>TEST FAILED<<<<<\n");
        -:   76:    }
        2:   77:    printf("\n>>>>> Random Card Test Complete - Smithy <<<<<\n\n");
        2:   78:    return 0;
        -:   79:};
